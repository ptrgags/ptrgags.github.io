import{d as L,c as T,x as k,y as x,o as c,a as r,b as s,f as M,g as w,h as p,t as u,j as h,F as m,r as N,u as V,n as B,l as E}from"./index-DN1STUre.js";const H={key:0,class:"tableau"},$={class:"card-frame"},A={class:"plaque"},D=s("br",null,null,-1),F=["innerHTML"],S={key:0},j=s("strong",null,"ðŸ”‚ Note:",-1),q={class:"centered"},z=["src"],R=["src"],U={class:"tracklist"},G=s("div",{class:"track track-header"},"#",-1),I=s("div",{class:"track track-header"},"Title",-1),J=s("div",{class:"track track-header"},"Date",-1),K=["onClick"],O=["onClick"],P=["onClick"],Q={key:1},W=["innerHTML"],Z=L({__name:"MusicAlbumView",setup(X){var y;const f=V(),e=T(()=>E.find(a=>a.id==f.params.album_id)),d=k(),o=k((y=e.value)==null?void 0:y.first_track),i=k(0);function g(a){if(o.value&&a.title===o.value.title){const n=["track","track-selected"];return e.value&&e.value.play_style==="loop"&&n.push("track-loop"),n}return["track"]}function b(){const a=d.value;a&&a.pause()}function v(a,n){var l;b(),o.value=a,i.value=n;const t=d.value;if(t){t.src=((l=e.value)==null?void 0:l.get_track_url(a))??"",t.load();const _=()=>{t.play(),t.removeEventListener("canplay",_)};t.addEventListener("canplay",_)}}function C(){var t;const a=((t=e.value)==null?void 0:t.tracks)??[],n=a.length;if(i.value+=1,i.value<n){const l=a[i.value];v(l,i.value)}}return x(()=>f.params.album_id,()=>{var a;o.value=(a=e.value)==null?void 0:a.first_track,i.value=0}),(a,n)=>e.value?(c(),r("div",H,[s("div",$,[M(w,{image:e.value.card},null,8,["image"])]),s("div",A,[s("h1",null,[p(u(e.value.title),1),D,p("("+u(e.value.years)+")",1)]),s("div",{innerHTML:e.value.description},null,8,F),e.value.play_style==="loop"?(c(),r("div",S,[j,p(" This album is a collection of background loops. The current track will repeat until you pause it or select a different track. ")])):h("",!0),s("div",q,[e.value.play_style==="loop"?(c(),r("audio",{key:0,ref_key:"player",ref:d,controls:"",controlslist:"nodownload",loop:"",src:e.value.get_track_url(e.value.first_track)},null,8,z)):(c(),r("audio",{key:1,ref_key:"player",ref:d,controls:"",controlslist:"nodownload",src:e.value.get_track_url(e.value.first_track),onEnded:C},null,40,R))]),s("div",U,[G,I,J,(c(!0),r(m,null,N(e.value.tracks,(t,l)=>(c(),r(m,{key:l},[s("div",{class:"track",onClick:_=>v(t,l)},u(l+1),9,K),s("div",{class:B(g(t)),onClick:_=>v(t,l)},u(t.title),11,O),s("div",{class:"track",onClick:_=>v(t,l)},u(t.date),9,P)],64))),128))]),o.value?(c(),r("div",Q,[s("h3",null,'Liner notes for "'+u(o.value.title)+'":',1),s("div",{innerHTML:o.value.description},null,8,W)])):h("",!0)])])):h("",!0)}});export{Z as default};
