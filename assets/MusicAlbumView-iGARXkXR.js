import{d as C,c as L,x as k,y as T,o as n,a as r,b as s,f as x,g as M,t as u,h as w,j as p,F as y,r as N,u as V,n as B,l as E}from"./index-5GIvy_jU.js";const H={key:0,class:"tableau"},$={class:"card-frame"},A={class:"plaque"},D=["innerHTML"],F={key:0},S=s("strong",null,"ðŸ”‚ Note:",-1),j={class:"centered"},q=["src"],z=["src"],R={class:"tracklist"},U=s("div",{class:"track track-header"},"#",-1),G=s("div",{class:"track track-header"},"Title",-1),I=s("div",{class:"track track-header"},"Date",-1),J=["onClick"],K=["onClick"],O=["onClick"],P={key:1},Q=["innerHTML"],Y=C({__name:"MusicAlbumView",setup(W){var h;const f=V(),e=L(()=>E.find(a=>a.id==f.params.album_id)),d=k(),o=k((h=e.value)==null?void 0:h.first_track),i=k(0);function m(a){if(o.value&&a.title===o.value.title){const c=["track","track-selected"];return e.value&&e.value.play_style==="loop"&&c.push("track-loop"),c}return["track"]}function g(){const a=d.value;a&&a.pause()}function v(a,c){var l;g(),o.value=a,i.value=c;const t=d.value;if(t){t.src=((l=e.value)==null?void 0:l.get_track_url(a))??"",t.load();const _=()=>{t.play(),t.removeEventListener("canplay",_)};t.addEventListener("canplay",_)}}function b(){var t;const a=((t=e.value)==null?void 0:t.tracks)??[],c=a.length;if(i.value+=1,i.value<c){const l=a[i.value];v(l,i.value)}}return T(()=>f.params.album_id,()=>{var a;o.value=(a=e.value)==null?void 0:a.first_track,i.value=0}),(a,c)=>e.value?(n(),r("div",H,[s("div",$,[x(M,{image:e.value.card},null,8,["image"])]),s("div",A,[s("h1",null,u(e.value.title)+" ("+u(e.value.years)+")",1),s("div",{innerHTML:e.value.description},null,8,D),e.value.play_style==="loop"?(n(),r("div",F,[S,w(" This album is a collection of background loops. The current track will repeat until you pause it or select a different track. ")])):p("",!0),s("div",j,[e.value.play_style==="loop"?(n(),r("audio",{key:0,ref_key:"player",ref:d,controls:"",controlslist:"nodownload",loop:"",src:e.value.get_track_url(e.value.first_track)},null,8,q)):(n(),r("audio",{key:1,ref_key:"player",ref:d,controls:"",controlslist:"nodownload",src:e.value.get_track_url(e.value.first_track),onEnded:b},null,40,z))]),s("div",R,[U,G,I,(n(!0),r(y,null,N(e.value.tracks,(t,l)=>(n(),r(y,{key:l},[s("div",{class:"track",onClick:_=>v(t,l)},u(l+1),9,J),s("div",{class:B(m(t)),onClick:_=>v(t,l)},u(t.title),11,K),s("div",{class:"track",onClick:_=>v(t,l)},u(t.date),9,O)],64))),128))]),o.value?(n(),r("div",P,[s("h3",null,'Liner notes for "'+u(o.value.title)+'":',1),s("div",{innerHTML:o.value.description},null,8,Q)])):p("",!0)])])):p("",!0)}});export{Y as default};
